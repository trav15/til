# API Gateway

Amazon API Gateway is a fully managed service that makes it easy for developers to _create, publish, maintain, monitor, and secure APIs at any scale_. With a few clicks in the AWS Management Console, you can create an API that acts as a “front door” for applications to access data, business logic, or functionality from your back-end services, such as workloads running on Amazon Elastic Compute Cloud (Amazon EC2), code running on AWS Lambda, or any web application. _Since it can use AWS Lambda, you can run your APIs without servers_. 

Amazon API Gateway handles all the tasks involved in accepting and processing up to _hundreds of thousands of concurrent API calls_, including traffic management, authorization and access control, monitoring, and API version management. Amazon API Gateway has no minimum fees or startup costs. You pay only for the API calls you receive and the amount of data transferred out.

API Gateway can execute Lambda code in your account, start Step Functions state machines, or make calls to Elastic Beanstalk, EC2, or web services outside of AWS with publicly accessible HTTP endpoints. ***All of the APIs created expose HTTPS endpoints only. API Gateway does not support unencrypted (HTTP) endpoints.***

Amazon API Gateway _provides throttling at multiple levels including global and by service call_. Throttling limits can be set for standard rates and bursts. For example, API owners can set a rate limit of 1,000 requests per second for a specific method in their REST APIs, and also configure Amazon API Gateway to handle a burst of 2,000 requests per second for a few seconds. Amazon API Gateway tracks the number of requests per second. _Any request over the limit will receive a **429 HTTP response**_. The client SDKs generated by Amazon API Gateway retry calls automatically when met with this response.

You can _add caching to API calls_ by provisioning an Amazon API Gateway cache and specifying its size in gigabytes. The cache is provisioned for a specific stage of your APIs. _This improves performance and reduces the traffic sent to your back end_. Cache settings allow you to control the way the cache key is built and the time-to-live (TTL) of the data stored for each method. Amazon API Gateway also exposes management APIs that help you invalidate the cache for each stage.

You can enable [AWS WAF](WAF-Shield.md) for your APIs in Amazon API Gateway, making it easier to protect your APIs against common web exploits such as SQL injection and Cross-Site Scripting (XSS). To authorize and verify API requests to AWS services, API Gateway can help you leverage signature version 4. Using signature version 4 authentication, you can use [IAM](IAM.md) and access policies to authorize access to your APIs and all your other AWS resources.

**Mapping Templates** can be used to transform a request from a frontend data format to the backend data format or transform a response from a backend to the format supported by the frontend. Mapping Templates are scripted in Velocity Template Language (VTL). In the case that a backend node is non-compatible with the older format, a mapping template can be used with API Gateway to transform the response while sending it to the non-compatible consumers. [^mm]

[^mm]: [AWS docs Mapping Templates section](https://docs.aws.amazon.com/apigateway/latest/developerguide/models-mappings.html#models-mappings-mappings)

## Endpoint Types

- **Edge-optimized API endpoint**: The default host name of an API Gateway API that is deployed to the specified region while using a CloudFront distribution to facilitate client access typically from across AWS regions. API requests are routed to the nearest CloudFront Point of Presence.
- **Regional API endpoint**: The host name of an API that is deployed to the specified region and intended to serve clients, such as EC2 instances, in the same AWS region. API requests are targeted directly to the region-specific API Gateway without going through any CloudFront distribution.
    - You can apply latency-based routing on regional endpoints to deploy an API to multiple regions using the same regional API endpoint configuration, set the same custom domain name for each deployed API, and configure latency-based DNS records in Route 53 to route client requests to the region that has the lowest latency.
- **Private API endpoint**: Allows a client to securely access private API resources inside a VPC. Private APIs are isolated from the public Internet, and they can only be accessed using VPC endpoints for API Gateway that have been granted access.

## *Resources*

- [Tutorials Dojo API Gateway Cheat Sheet](https://tutorialsdojo.com/amazon-api-gateway/)